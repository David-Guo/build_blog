# 开发日志

记录开发学习中遇到的问题和一些基本概念，方便日后回顾。

## ch2

### 2.1 初始化

Web服务器网关接口(WSGI)协议，把接收自客户端的所有请求都转交给flask类的对象来处理。

### WSGI 框架

Web 应用的本质：

1. 浏览器发送一个HTTP请求
2. 服务器收到请求，生成HTML文档
3. 服务器把HTML文档作为HTTP响应的Body发送给浏览器
4. 浏览器收到HTTP响应，从HTTP Body取出HTML文档并显示

接收HTTP请求，解析HTTP请求，发送HTTP响应这些底层代码交给专门的服务器软件实现，用python 专注于生出HTML文档。我们不希望接抽到TCP连接，HTTP原始请求和响应格式，所以需要一个统一的接口，让我们专心用Python 编写Web 业务。

### Web 框架

了解WSGI 框架，我们发现：一个Web App, 就是写一个WSGI的处理函数，针对每个HTTP请求进行响应。

WSGI 提供的接口虽然比HTTP接口高级了不少，但和Web App的处理逻辑比，还是比较低级，我们需要在WSGI接口之上能进一步抽象，让我们专注于一个函数处理一个URL，至于URL到函数的映射，就交给Web框架来做。

对于Flask 框架，通过Python的修饰器在内部自动地把URL和函数关联起来。

在编写URL请求处理函数时，除了配置URL外，从HTTP请求拿到用户数据也是非常重要的。Web框架都提供了自己的API来实现这些功能。Flask通过`request.form['name']`来获取表单的内容。

### 基本概念

* 路由：处理URL和响应函数直接之间关系的程序称为路由
* 响应：注册函数返回值称为响应，如果时web浏览器对应的响应用户插卡的文档
* 视图函数：像index() 这样的函数
* URL映射：URL和视图函数的之间的对应关系。

## ch3 模板

* 模板：一个包含响应文本的文件，其中包含占位变量表示的动态部分，其具体值只在请求的上下文中才能知道。
* 渲染：使用真实值替换变量，在返回最终得到的响应字符串，该过程称为渲染。

### 3.1.3 控制结构

`block` 标签定义的元素可在衍生模板中修改。`extends`指令申明这个模板衍生自`base.html`，在extends 指令之后，基模板中的3个快被重新定义，模板引擎会将其插入适当的位置。如果基模板中的内容不为空，使用`super()`获取原来的内容。


## ch4 表单

### 4.2 表单类

`<input>` 标签用于收集用户信息，根据不同的 type 属性值，输入字段拥有很多种形式。

输入字段可以时文本字段，复选框，掩码后的文本控件，单选按钮，按钮等等。

## ch7 大型程序的结构

### 7.2 配置选项

使用层次结构的配置类。

三个子类中，SQLALCHEMY_DATABASE_URI 变量都被指定了不同的值。这样程序就可以在不同的配置环境中运行，每个环境都使用不同的数据库。

`__name__` 是模块文件名，`__main__` 是运行的文件名

## 参考

[jinja2 文档](http://docs.jinkan.org/docs/jinja2/)

[jinja模板设计者文档](http://docs.jinkan.org/docs/jinja2/templates.html)
